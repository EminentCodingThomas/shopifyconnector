<?xml version="1.0" encoding="UTF-8" ?>
<templates>
  <t t-name="common_connector_library.graph" t-inherit="web.JournalDashboardGraphField">
        <xpath expr="//div[@class='o_dashboard_graph']" position="after">
        <div class ="row">
            <div class="col-12 mt4 ep_kanban_records">
                <a id="instance_product" class="ep-bg-2" t-on-click="_getProducts">
                    <p class="text-center mb0 font-weight-bold">
                        <t t-if="this.graph_data.product_date">
                            <t t-esc="this.graph_data.product_date.product_count"/>
                        </t>
                    </p>
                    <p class="text-center mb0">Products</p>
                </a>
                <a id="instance_customer" class="ep-bg-1" t-on-click="_getCustomers">
                    <t t-if="this.graph_data.customer_data">
                        <p class="text-center mb0 font-weight-bold">
                            <t t-esc="this.graph_data.customer_data.customer_count"/>
                        </p>
                    </t>
                    <p class="text-center mb0">Customers</p>
                </a>
                <a id="instance_order" class="ep-bg-4" t-on-click="_getOrders">
                    <t t-if="this.graph_data.order_data">
                        <p class="text-center mb0 font-weight-bold">
                            <t t-esc="this.graph_data.order_data.order_count"/>
                        </p>
                    </t>
                    <p class="text-center mb0">Orders</p>
                </a>
                <a id="instance_order_shipped" class="ep-bg-5" t-on-click="_getShippedOrders">
                    <t t-if="this.graph_data.order_shipped">
                        <p class="text-center mb0 font-weight-bold">
                            <t t-esc="this.graph_data.order_shipped.order_count"/>
                        </p>
                    </t>
                    <p class="text-center mb0">Order Shipped</p>
                </a>
                <a id="instance_refund" class="ep-bg-7" t-on-click="_getRefundOrders">
                    <t t-if="this.graph_data.refund_data">
                        <p class="text-center mb0 font-weight-bold">
                            <t t-esc="this.graph_data.refund_data.refund_count"/>
                        </p>
                    </t>
                    <p class="text-center mb0">Refund</p>
                </a>
            </div>
          </div>  
          <div class="row o_kanban_record_top">
            <div class="col-12 mt4">
                <div id="shopify_left" class="float-left o_kanban_top_left">
                    <div id="perform_operation" class="o_kanban_record_headings">
                        <button class="btn btn-primary ep-btn-primary" t-on-click="_performOpration">
                            <span>Perform Operation</span>
                        </button>
                    </div>
                </div>
                <div class="o_kanban_primary_bottom ep_o_kanban_setting">
                    <div>
                        <a id="instance_log" t-on-click="_getLog">
                            <span class="mr4">
                                <img class="img img-responsive m-auto"
                                     src="/common_connector_library/static/src/img/log.svg"
                                     style="width: 16px;display: inline-block;"/>
                            </span>
                            <span class=" font-weight-bold">Logs</span>
                        </a>
                        <a id="instance_report" t-on-click="_getReport">
                            <span class="mr4">
                                <img class="img img-responsive m-auto"
                                     src="/common_connector_library/static/src/img/report.svg"
                                     style="width: 16px;display: inline-block;"/>
                            </span>
                            <span class=" font-weight-bold">Report</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        </xpath>  

        <xpath expr="//div[@class='o_dashboard_graph']" position="before">
        <div class="row mt4">
            <div class="col-12">
              <div class="d-flex justify-content-end">
          <select class="border-0 h7 ml-auto" id="sort_order_data" t-on-change="_sortOrders">
              <option value="week"
                      t-att-selected="this.graph_data.sort_on == 'week' ? 'selected' : undefined">
                  Current Week
              </option>
              <option value="month"
                      t-att-selected="this.graph_data.sort_on == 'month' ? 'selected' : undefined">
                  Current Month
              </option>
              <option value="year"
                      t-att-selected="this.graph_data.sort_on == 'year' ? 'selected' : undefined">
                  Current Year
              </option>
              <option value="all"
                      t-att-selected="this.graph_data.sort_on == 'all' ? 'selected' : undefined">All
              </option>
          </select>
          </div>
          </div>
          </div>
          <div class="container o_kanban_card_content p-0 ep_kanban_graph">
            <div class="row mt8 mb8 mx-0 align-items-center ep_graph_details">
                <div class="col-3 pr-2">
                    <p class="mb0">Sales</p>
                    <h4 class="mb0">
                        <b>
                            <span>
                                <t t-esc="this.graph_data.currency_symbol + this.graph_data.total_sales"/>
                            </span>
                        </b>
                    </h4>
                </div>
                <div class="col-5 text-center p-0">
                    <a style="border: 1px solid #eaeaea;border-radius: 5px;padding:5px 10px;color:#cccccf;">
                        Average Order Value :
                        <b>
                            <t t-if="this.graph_data.total_sales and this.graph_data.order_data.order_count">
                                <t t-if="this.graph_data.order_data.order_count != 0">
                                    <t t-esc="this.graph_data.currency_symbol + Math.round(this.graph_data.total_sales / this.graph_data.order_data.order_count)"/>
                                </t>
                                <t t-else="">
                                    <t t-esc="this.graph_data.currency_symbol+ this.graph_data.order_data.order_count"/>
                                </t>
                            </t>
                        </b>
                    </a>
                </div>
                <div class="col-4 pl-0 text-right">
                    <t t-if="this.graph_data and this.graph_data.graph_sale_percentage and this.graph_data.sort_on != 'all'">
                        <div class="d-inline-flex align-items-center">
                            <h1>
                                <t t-esc="growth_color"></t>
                            </h1>
                            <!-- When sales growth is up -->
                            <img class="img img-responsive m-auto" style="width: 30px;"
                                 t-att-src="this.graph_data.graph_sale_percentage.type == 'positive' ? '/common_connector_library/static/src/img/growth-up.svg' : '/common_connector_library/static/src/img/growth-down.svg'"/>
                            <!-- When sales growth is down
                            <img class="img img-responsive m-auto" src="/common_connector_library/static/src/img/growth-down.svg" style="width: 30px;" />-->
                            <h4 class="mb0 ml8"
                                t-att-style="this.graph_data.graph_sale_percentage.type == 'positive' ? 'color:#5cbc2a' : 'color:#ff5a5a'"><!-- When sales growth is down - color code is: #ff5a5a -->
                                <b>
                                    <span>
                                        <t t-esc="this.graph_data.graph_sale_percentage.value"></t>
                                    </span>
                                    <span>%</span>
                                </b>
                            </h4>

                        </div>
                    </t>
                </div>
            </div>
        </div>
        </xpath>
    </t>

</templates>